---
Info:
  Name: Racing
  Description:
    - This preset is designed to present as fair a playing field as possible when racing against others playing the same seed
    - Rooms within a stage are shuffled where possible
    - The connections between stages are shuffled
    - Relic locations are shuffled
    - Item locations are shuffled
    - Enemy drops are shuffled, but the base enemy drop rate has been tripled
    - Starting gear is randomized, but the overall quality of starting gear is reduced
    - Any consumables found will congregate around a smaller subset of possible consumables, resulting in larger stacks of the same consumables
Options:
  Assign Power of Wolf relic a unique ID: true
  Clock hands show minutes and seconds instead of hours and minutes: true
  Color-code each stage on the map: true
  Disable clipping on screen edge of Demon Switch Wall: true
  Disable clipping on screen edge of Left Gear Room Wall: true
  Disable clipping on screen edge of Pendulum Room Wall: true
  Disable clipping on screen edge of Snake Column Wall: true
  Disable clipping on screen edge of Tall Zig Zag Room Wall: true
  Enable debug mode: false
  Normalize special effects: true
  Normalize room connections: true
  Normalize sounds: true
  Normalize Ferryman Gate: true
  Preserve unsaved map data: Revelation
  Prevent softlocks related to Death cutscene in Castle Entrance: true
  Prevent softlocks related to Door behind Scylla: true
  Shift wall in Plaque Room With Breakable Wall away from screen edge: true
  Shuffle Pitch Black Spike Maze: false
  Skip Maria cutscene in Alchemy Laboratory: true
Changes:
  Base Drop Rates:
    - Stage: Global
      Index: 1
      Value: 192
    - Stage: Global
      Index: 2
      Value: 96
    - Stage: Global
      Index: 3
      Value: 48
Quest reward shuffler:
  - Description: Shuffle significant location checks
    Steps:
      - Action: Populate Pool
        Name: Pool - Major Relic
        Match:
          Targets - Tags (All):
            - Relic
          Targets - Tags (None):
            - Low Priority - Racing
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (All):
            - Relic
            - Low Priority - Racing
        Selection:
          Pool: Pool - Major Relic
          Method: Random Without Replacement
      - Action: Shuffle Quest Rewards
        Match:
          Sources - Tags (All):
            - Significant
            - Location Check
    Notes:
      - Relics that are unhelpful to racing are replaced with more helpful ones
  - Description: Shuffle rare enemy drops and optional location checks
    TODO(sestren):
      - Exclude Manna Prisms, Life Max-Ups, Heart Max-Ups, and Library Cards from enemy drops
    Steps:
      - Action: Populate Pool
        Name: Pool - Bomb
        Match:
          Targets - Tags (All):
            - Bomb
          Targets - Tags (None):
            - Relic
      - Action: Populate Pool
        Name: Pool - Thrown
        Match:
          Targets - Tags (All):
            - Thrown
          Targets - Tags (None):
            - Relic
      - Action: Populate Pool
        Name: Pool - Food
        Match:
          Targets - Tags (All):
            - Food
          Targets - Tags (None):
            - Relic
      - Action: Populate Pool
        Name: Pool - Buff
        Match:
          Targets - Tags (All):
            - Buff
          Targets - Tags (None):
            - Relic
      - Action: Populate Pool
        Name: Pool - Healing
        Match:
          Targets - Tags (All):
            - Healing
          Targets - Tags (None):
            - Relic
      - Action: Populate Pool
        Name: Pool - High Quality
        Match:
          Targets - Tags (All):
            - High Priority - Racing
          Targets - Tags (None):
            - Relic
            - Upgrade
      - Action: Populate Pool
        Name: Pool - Moderate Quality
        Match:
          Targets - Tags (Any):
            - Accessory
            - Armor
            - Consumable
            - Gem
            - One-Handed Weapon
            - Subweapon
            - Two-Handed Weapon
            - Upgrade
          Targets - Tags (None):
            - High Priority - Racing
            - Low Priority - Racing
            - Relic
            - Upgrade
      - Action: Populate Pool
        Name: Pool - Low Quality
        Match:
          Targets - Tags (All):
            - Low Priority - Racing
          Targets - Tags (None):
            - Relic
            - Upgrade
      - Action: Populate Pool
        Name: Pool - Random Quality
        List:
          - Pool - Low Quality
          - Pool - Low Quality
          - Pool - Moderate Quality
          - Pool - Moderate Quality
          - Pool - Moderate Quality
          - Pool - Moderate Quality
          - Pool - Moderate Quality
          - Pool - Moderate Quality
          - Pool - Moderate Quality
          - Pool - High Quality
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Targets - Tags (All):
            - Bomb
        Selection:
          Pool: Pool - Bomb
          Method: Random With Repetition
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Targets - Tags (All):
            - Thrown
        Selection:
          Pool: Pool - Thrown
          Method: Random With Repetition
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Targets - Tags (All):
            - Food
        Selection:
          Pool: Pool - Food
          Method: Random With Repetition
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Targets - Tags (All):
            - Buff
        Selection:
          Pool: Pool - Buff
          Method: Random With Repetition
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Targets - Tags (All):
            - Healing
        Selection:
          Pool: Pool - Healing
          Method: Random With Repetition
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Targets - Tags (All):
            - Low Priority - Racing
        Selection:
          Pool: Pool - Random Quality
          Method: Random With Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Sources - Target Reward (Any):
            - Pool - Low Quality
        Selection:
          Pool: Pool - Low Quality
          Method: Random With Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Sources - Target Reward (Any):
            - Pool - Moderate Quality
        Selection:
          Pool: Pool - Moderate Quality
          Method: Random With Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Sources - Target Reward (Any):
            - Pool - High Quality
        Selection:
          Pool: Pool - High Quality
          Method: Random With Replacement
      - Action: Shuffle Quest Rewards
        Match:
          Sources - Tags (Any):
            - Location Check
            - Enemy Drop
          Sources - Tags (None):
            - Significant
          Targets - Tags (None):
            - Relic
    Notes:
      - Enemy drops and optional location checks are mixed together
      - Items are condensed into a smaller variety of items
      - Items that are unhelpful to racing are likely to be replaced by a more helpful item
  - Description: Randomize starting gear and special items
    Steps:
      - Action: Populate Pool
        Name: Pool - Bone Scimitar
        Match:
          Targets - Tags (Any):
            - Accessory
            - Armor
            - One-Handed Weapon
            - Two-Handed Weapon
          Targets - Tags (None):
            - Quality - Good
      - Action: Populate Pool
        Name: Pool - Starting Gear - Weapon
        Match:
          Targets - Tags (Any):
            - One-Handed Weapon
          Targets - Tags (None):
            - Quality - Good
      - Action: Populate Pool
        Name: Pool - Starting Gear - Shield
        Match:
          Targets - Tags (Any):
            - Shield
          Targets - Tags (None):
            - Quality - Good
      - Action: Populate Pool
        Name: Pool - Starting Gear - Head
        Match:
          Targets - Tags (Any):
            - Head
          Targets - Tags (None):
            - Quality - Good
      - Action: Populate Pool
        Name: Pool - Starting Gear - Body
        Match:
          Targets - Tags (Any):
            - Body
          Targets - Tags (None):
            - Quality - Good
      - Action: Populate Pool
        Name: Pool - Starting Gear - Cloak
        Match:
          Targets - Tags (Any):
            - Cloak
          Targets - Tags (None):
            - Quality - Good
      - Action: Populate Pool
        Name: Pool - Starting Gear - Accessory
        Match:
          Targets - Tags (Any):
            - Accessory
          Targets - Tags (None):
            - Quality - Good
      - Action: Populate Pool
        Name: Pool - Prologue Reward - Consumable
        Match:
          Targets - Tags (Any):
            - Consumable
      - Action: Populate Pool
        Name: Pool - Name Code - Accessory
        Match:
          Targets - Tags (Any):
            - Accessory
      - Action: Populate Pool
        Name: Pool - Name Code - Armor
        Match:
          Targets - Tags (Any):
            - Body
      - Action: Remap Quest Rewards
        Match:
          Sources - Names (Any):
            - Special - Guaranteed Drop (Bone Scimitar, Copper)
            - Special - Guaranteed Drop (Bone Scimitar, Green)
        Selection:
          Pool: Pool - Bone Scimitar
          Method: Random Without Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Names (Any):
            - Special - Starting Equipment (Alucard Sword)
        Selection:
          Pool: Pool - Starting Gear - Weapon
          Method: Random Without Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Names (Any):
            - Special - Starting Equipment (Alucard Shield)
        Selection:
          Pool: Pool - Starting Gear - Shield
          Method: Random Without Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Names (Any):
            - Special - Starting Equipment (Dragon Helm)
        Selection:
          Pool: Pool - Starting Gear - Head
          Method: Random Without Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Names (Any):
            - Special - Starting Equipment (Alucard Mail)
        Selection:
          Pool: Pool - Starting Gear - Body
          Method: Random Without Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Names (Any):
            - Special - Starting Equipment (Twilight Cloak)
        Selection:
          Pool: Pool - Starting Gear - Cloak
          Method: Random Without Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Names (Any):
            - Special - Starting Equipment (Necklace of J)
        Selection:
          Pool: Pool - Starting Gear - Accessory
          Method: Random Without Replacement
      - Action: Remap Quest Rewards
        Match:
          Sources - Names (Any):
            - Special - Prologue Bonus Equipment (Potion)
            - Special - Prologue Bonus Equipment (Heart Refresh)
            - Special - Prologue Bonus Equipment (Neutron Bomb)
        Selection:
          Pool: Pool - Prologue Reward - Consumable
          Method: Random Without Replacement
    Notes:
      - Good quality items are banned on most starting gear
Room shuffler:
  Shuffle rooms within stages: true
Stage shuffler:
  Shuffle connections between stages: true
  Loading room labels: Connection
Solver:
  Default skillset: Casual
